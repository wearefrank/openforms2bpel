<Module xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../FrankConfig.xsd">
    <Adapter name="GetInformationToSend"
             description="Verwerken naar Utrecht">

        <Receiver name="GetInformationToSend">
            <JavaListener name="GetInformationToSend" />
        </Receiver>

        <Pipeline>
            <Exits>
                <Exit name="EXIT" state="SUCCESS"/>
                <Exit name="EXCEPTION" state="ERROR"/>
            </Exits>

            <WsdlXmlValidatorPipe name="ValidateMessageToSend"
                                  wsdl="Basic.wsdl"
            >
                <Forward name="success" path="UnwrapMessage"/>
                <Forward name="failure" path="NotWellFormed"/>
                <Forward name="parserError" path="NotWellFormed"/>
            </WsdlXmlValidatorPipe>

            <SoapWrapperPipe
                    name="UnwrapMessage"
                    direction="UNWRAP"
                    removeOutputNamespaces="true">
                <Forward name="success" path="WrapMessage" />
            </SoapWrapperPipe>

            <SoapWrapperPipe
                    name="WrapMessage"
                    direction="WRAP"
                    removeOutputNamespaces="true">
                <Forward name="success" path="SendTheSOAP"/>
            </SoapWrapperPipe>

            <SenderPipe name="SendTheSOAP">
                <WebServiceSender
                        name="SendToUtrecht"
                        soap="true"
                        verifyHostname="false"
                        allowSelfSignedCertificates="true"
                        url="${openform2bpel.Endpoint}"/>
                <Forward name="success" path="EXIT"/>
                <Forward name="exception" path="EXCEPTION" />
            </SenderPipe>

        </Pipeline>
    </Adapter>
</Module>